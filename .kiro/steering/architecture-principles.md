# 架构设计原则

本文档定义了 Turbo-Stack 项目的核心架构原则，所有开发工作必须遵循。

## 核心原则

### 1. 参考业界最先进方案

- 总是参考业界最先进的方案架构来做
- 如果有更好的建议，先与用户讨论确认
- 不盲目追新，但要保持技术先进性

### 2. 高内聚，低耦合

- **高内聚**：相关功能集中在一起，模块职责单一明确
- **低耦合**：模块之间依赖最小化，通过接口/抽象交互
- 优先使用依赖注入、工厂模式等解耦手段

### 3. 维护性和扩展性

- 代码结构清晰，易于理解和修改
- 新增功能不应大规模修改现有代码
- 遵循开闭原则：对扩展开放，对修改关闭

### 4. 合理性和方便性

- 方案要合理，不过度设计
- 使用要方便，开发体验优先
- 简单优于复杂，但不牺牲正确性

### 5. 单一数据源

- 每种数据只有一个权威来源
- 避免数据重复定义和同步问题
- 共享代码集中在 `shared/` 目录

## 实践指南

### 共享层设计

```
shared/
├── types/        # 类型定义（唯一数据源）
├── composables/  # 平台无关的 Vue Composables
├── constants/    # 常量和枚举
└── utils/        # 工具函数
```

### 适配层模式

当需要跨平台共享逻辑时：
1. 核心逻辑放在 `shared/composables/`
2. 使用工厂函数，通过依赖注入适配各端
3. 各端只写薄薄的适配层

### 决策流程

遇到架构决策时：
1. 先调研业界最佳实践
2. 评估维护性、扩展性、耦合度
3. 如有多个方案，与用户讨论
4. 选择最合理且方便的方案
